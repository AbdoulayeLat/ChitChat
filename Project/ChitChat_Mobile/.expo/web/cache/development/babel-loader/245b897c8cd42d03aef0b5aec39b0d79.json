{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport React, { useEffect } from 'react';\nimport Colors from \"../../utils/Colors\";\nimport * as Contacts from 'expo-contacts';\nimport ButtonCustom from \"../../components/ButtonCustom\";\nimport { collection, addDoc, doc, setDoc, getDocs, getDoc, query, orderBy, onSnapshot, where } from 'firebase/firestore';\nimport { auth, firestore, storage } from \"../../firebase\";\nimport { async } from '@firebase/util';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Contact = function Contact(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var userUID = auth.currentUser.uid;\n\n  var _React$useState = React.useState('+1'),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      phoneNumber = _React$useState2[0],\n      setPhoneNumber = _React$useState2[1];\n\n  var userPhoneNumber = route.params.phoneNumber;\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      message = _React$useState4[0],\n      setMessage = _React$useState4[1];\n\n  var checkUser = function checkUser() {\n    getDoc(doc(firestore, \"users\", phoneNumber)).then(function (docSnap) {\n      if (docSnap.exists()) {\n        navigation.navigate('ChatScreen', {\n          friendPhoneNumber: phoneNumber,\n          userPhoneNumber: userPhoneNumber\n        });\n      } else {\n        Alert.alert(\"This phone number hasn't registered to ChitChat yet! Invite themðŸ˜‰\");\n      }\n    });\n  };\n\n  useEffect(function _callee() {\n    var snapQuery, users, subscriber;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            snapQuery = query(collection(firestore, 'chats'), where('uid', '==', userUID));\n            users = [];\n            subscriber = onSnapshot(snapQuery, function (snaphot) {\n              snaphot.forEach(function (doc) {\n                users.push({\n                  uid: doc.data().uid,\n                  friendName: doc.data().friendName,\n                  key: doc.id\n                });\n              });\n              setMessage(users);\n            });\n            return _context.abrupt(\"return\", function () {\n              return subscriber();\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, []);\n  return _jsx(SafeAreaView, {\n    style: styles.safeAreacontainer,\n    children: _jsx(TouchableWithoutFeedback, {\n      onPress: Keyboard.dismiss,\n      children: _jsxs(View, {\n        style: styles.container,\n        children: [_jsx(View, {\n          style: {\n            height: '50%',\n            backgroundColor: Colors.Secondary\n          },\n          children: _jsx(FlatList, {\n            data: message,\n            renderItem: function renderItem(_ref2) {\n              var item = _ref2.item;\n              return _jsx(View, {\n                style: {\n                  height: 50,\n                  flex: 1,\n                  alignItems: 'flex-start',\n                  justifyContent: 'flex-start'\n                },\n                children: _jsx(Text, {\n                  children: item.friendName\n                })\n              });\n            }\n          })\n        }), _jsx(Text, {\n          style: styles.infoText,\n          children: \"Who do you want to chat with:\"\n        }), _jsx(TextInput, {\n          style: styles.textInput,\n          keyboardType: 'phone-pad',\n          placeholder: \"+11234567899\",\n          onChangeText: function onChangeText(text) {\n            return setPhoneNumber(text.replace(/ /g, ''));\n          }\n        }), _jsx(ButtonCustom, {\n          text: 'Enter Chat',\n          onPress: function onPress() {\n            return checkUser();\n          }\n        })]\n      })\n    })\n  });\n};\n\nvar styles = StyleSheet.create({\n  safeAreacontainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: Colors.Primary,\n    flex: 1\n  },\n  textInput: {\n    marginTop: 5,\n    marginBottom: 5,\n    borderWidth: 2,\n    borderRadius: 10,\n    backgroundColor: Colors.SILVER,\n    fontSize: 20,\n    height: 40,\n    width: 300,\n    textAlign: 'center'\n  },\n  infoText: {\n    color: Colors.Secondary,\n    fontSize: 20,\n    marginTop: 50\n  }\n});\nexport default Contact;","map":{"version":3,"sources":["/Users/abdoulayendiaye/Desktop/ChitChat/Project/ChitChat_Mobile/screens/Chat/Contact.js"],"names":["React","useEffect","Colors","Contacts","ButtonCustom","collection","addDoc","doc","setDoc","getDocs","getDoc","query","orderBy","onSnapshot","where","auth","firestore","storage","async","Contact","route","navigation","userUID","currentUser","uid","useState","phoneNumber","setPhoneNumber","userPhoneNumber","params","message","setMessage","checkUser","then","docSnap","exists","navigate","friendPhoneNumber","Alert","alert","snapQuery","users","subscriber","snaphot","forEach","push","data","friendName","key","id","styles","safeAreacontainer","Keyboard","dismiss","container","height","backgroundColor","Secondary","item","flex","alignItems","justifyContent","infoText","textInput","text","replace","StyleSheet","create","Primary","marginTop","marginBottom","borderWidth","borderRadius","SILVER","fontSize","width","textAlign","color"],"mappings":"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","sourcesContent":["import { View, Text, TextInput, StyleSheet, ActivityIndicator, Keyboard, Alert, SafeAreaView, ScrollView, FlatList, TouchableWithoutFeedback } from 'react-native';\nimport React, {useEffect} from 'react';\nimport Colors from '../../utils/Colors';\nimport * as Contacts from 'expo-contacts';\nimport ButtonCustom from '../../components/ButtonCustom';\nimport {collection, addDoc, doc, setDoc, getDocs, getDoc, query, orderBy, onSnapshot, where } from 'firebase/firestore';\nimport { auth, firestore, storage } from '../../firebase';\nimport { async } from '@firebase/util';\n\nconst Contact = ({route,navigation}) => {\n  const userUID = auth.currentUser.uid;\n  const [phoneNumber, setPhoneNumber] = React.useState('+1');\n  const userPhoneNumber = route.params.phoneNumber;\n  const [message, setMessage] = React.useState([]);\n\n  const checkUser = () => {\n    //Get Data from Firestore DBf\n    getDoc(doc(firestore, \"users\", phoneNumber)).then(docSnap => {\n      if (docSnap.exists()) {\n        navigation.navigate('ChatScreen', {\n          friendPhoneNumber: phoneNumber,\n          userPhoneNumber: userPhoneNumber,\n        })\n      } else {\n        Alert.alert(\"This phone number hasn't registered to ChitChat yet! Invite themðŸ˜‰\")\n      }\n    })\n  }\n\n  useEffect( async () => {\n    const snapQuery = query(collection(firestore, 'chats'), where('uid', '==', userUID))\n    const users = []\n    let subscriber = onSnapshot(snapQuery, (snaphot) => {\n      snaphot.forEach((doc) => {\n        users.push({\n          uid: doc.data().uid,\n          friendName: doc.data().friendName,\n          key: doc.id\n        })\n      });\n      setMessage(users)\n    });\n    // await getDocs(snapQuery).then((snaphot) => {\n    //   snaphot.forEach((doc) => {\n    //     users.push({\n    //       uid: doc.data().uid,\n    //       friendName: doc.data().friendName,\n    //       key: doc.id\n    //     })\n    //   });\n    //   setMessage(users)\n    // });\n\n    // Unsubscribe from events when no longer in use\n    return () => subscriber();\n  }, []);\n  \n  return (\n    <SafeAreaView style={styles.safeAreacontainer}>\n      <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\n        <View style={styles.container}>\n          <View style={{height:'50%', backgroundColor:Colors.Secondary}}>\n            <FlatList \n              data={message}\n              renderItem={({ item }) => (\n              <View style={{ height: 50, flex: 1, alignItems: 'flex-start', justifyContent: 'flex-start' }}>\n                <Text>{item.friendName}</Text>\n              </View>\n            )}/>\n          </View>\n          <Text style={styles.infoText}>Who do you want to chat with:</Text>\n          <TextInput style={styles.textInput} keyboardType={'phone-pad'} placeholder='+11234567899' onChangeText={(text) => setPhoneNumber(text.replace(/ /g, ''))}/>\n          <ButtonCustom text={'Enter Chat'} onPress={() => checkUser()}/>\n        </View>\n      </TouchableWithoutFeedback>\n    </SafeAreaView>\n  )\n}\n\nconst styles = StyleSheet.create({\n  safeAreacontainer:{\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: Colors.Primary,\n    flex:1\n  },\n  textInput:{\n    marginTop: 5,\n    marginBottom:5,\n    borderWidth:2,\n    borderRadius:10,\n    backgroundColor: Colors.SILVER,\n    fontSize: 20,\n    height: 40,\n    width: 300,\n    textAlign: 'center'\n  },\n  infoText:{\n    color: Colors.Secondary,\n    fontSize: 20,\n    marginTop: 50,\n  },\n});\n\nexport default Contact;"]},"metadata":{},"sourceType":"module"}