{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import firebase from'firebase/compat/app';import'firebase/compat/auth';import*as React from'react';var FirebaseRecaptchaVerifierModal=function(_React$Component){_inherits(FirebaseRecaptchaVerifierModal,_React$Component);var _super=_createSuper(FirebaseRecaptchaVerifierModal);function FirebaseRecaptchaVerifierModal(){var _this;_classCallCheck(this,FirebaseRecaptchaVerifierModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.verifier=null;_this.setRef=function(ref){if(ref){if(_this.props.appVerificationDisabledForTesting!==undefined){firebase.auth().settings.appVerificationDisabledForTesting=!!_this.props.appVerificationDisabledForTesting;}if(_this.props.languageCode){firebase.auth().languageCode=_this.props.languageCode;}_this.verifier=new firebase.auth.RecaptchaVerifier(ref,{size:_this.props.attemptInvisibleVerification?'invisible':'normal'});}else{_this.verifier=null;}if(_this.props.innerRef){_this.props.innerRef.current=_this.verifier;}};return _this;}_createClass(FirebaseRecaptchaVerifierModal,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps){return this.props.appVerificationDisabledForTesting!==nextProps.appVerificationDisabledForTesting||this.props.attemptInvisibleVerification!==nextProps.attemptInvisibleVerification||this.props.languageCode!==nextProps.languageCode;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.innerRef!==prevProps.innerRef){if(this.props.innerRef){this.props.innerRef.current=this.verifier;}}}},{key:\"render\",value:function render(){var _this$props=this.props,attemptInvisibleVerification=_this$props.attemptInvisibleVerification,appVerificationDisabledForTesting=_this$props.appVerificationDisabledForTesting,languageCode=_this$props.languageCode;return React.createElement(\"div\",{style:styles.container,key:(attemptInvisibleVerification?'invisible':'visible')+\"-\"+(appVerificationDisabledForTesting?'testing':'regular')+\"-\"+(languageCode!=null?languageCode:''),id:\"recaptcha-container\",ref:this.setRef,dangerouslySetInnerHTML:{__html:''}});}}]);return FirebaseRecaptchaVerifierModal;}(React.Component);export default React.forwardRef(function(props,ref){return React.createElement(FirebaseRecaptchaVerifierModal,_objectSpread(_objectSpread({},props),{},{innerRef:ref}));});var styles={container:{zIndex:1000}};","map":{"version":3,"sources":["../src/FirebaseRecaptchaVerifierModal.web.tsx"],"names":[],"mappings":"60DAAA,MAAO,CAAA,QAAP,KAAqB,qBAArB,CACA,MAAO,sBAAP,CACA,MAAO,GAAK,CAAA,KAAZ,KAAuB,OAAvB,C,GAWM,CAAA,8B,0ZACI,Q,CAAmD,I,OAEnD,M,CAAS,SAAC,GAAD,CAAa,CAC5B,GAAI,GAAJ,CAAS,CACP,GAAI,MAAK,KAAL,CAAW,iCAAX,GAAiD,SAArD,CAAgE,CAC9D,QAAQ,CAAC,IAAT,GAAgB,QAAhB,CAAyB,iCAAzB,CACE,CAAC,CAAC,MAAK,KAAL,CAAW,iCADf,CAED,CACD,GAAI,MAAK,KAAL,CAAW,YAAf,CAA6B,CAC3B,QAAQ,CAAC,IAAT,GAAgB,YAAhB,CAA+B,MAAK,KAAL,CAAW,YAA1C,CACD,CACD,MAAK,QAAL,CAAgB,GAAI,CAAA,QAAQ,CAAC,IAAT,CAAc,iBAAlB,CAAoC,GAApC,CAAyC,CACvD,IAAI,CAAE,MAAK,KAAL,CAAW,4BAAX,CAA0C,WAA1C,CAAwD,QADP,CAAzC,CAAhB,CAGD,CAXD,IAWO,CACL,MAAK,QAAL,CAAgB,IAAhB,CACD,CACD,GAAI,MAAK,KAAL,CAAW,QAAf,CAAyB,CACvB,MAAK,KAAL,CAAW,QAAX,CAAoB,OAApB,CAA8B,MAAK,QAAnC,CACD,CACF,C,+FAED,+BAAsB,SAAtB,CAAsC,CACpC,MACE,MAAK,KAAL,CAAW,iCAAX,GACE,SAAS,CAAC,iCADZ,EAEA,KAAK,KAAL,CAAW,4BAAX,GAA4C,SAAS,CAAC,4BAFtD,EAGA,KAAK,KAAL,CAAW,YAAX,GAA4B,SAAS,CAAC,YAJxC,CAMD,C,kCAED,4BAAmB,SAAnB,CAAmC,CACjC,GAAI,KAAK,KAAL,CAAW,QAAX,GAAwB,SAAS,CAAC,QAAtC,CAAgD,CAC9C,GAAI,KAAK,KAAL,CAAW,QAAf,CAAyB,CACvB,KAAK,KAAL,CAAW,QAAX,CAAoB,OAApB,CAA8B,KAAK,QAAnC,CACD,CACF,CACF,C,sBAED,iBAAM,CACJ,gBACE,KAAK,KADP,CAAQ,4BAAR,aAAQ,4BAAR,CAAsC,iCAAtC,aAAsC,iCAAtC,CAAyE,YAAzE,aAAyE,YAAzE,CAEA,MACE,CAAA,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CACE,KAAK,CAAE,MAAM,CAAC,SADhB,CAEE,GAAG,EAAK,4BAA4B,CAAG,WAAH,CAAiB,SAAlD,OACD,iCAAiC,CAAG,SAAH,CAAe,SAD/C,OAEC,YAFD,OAEC,YAFD,CAEiB,EAFjB,CAFL,CAKE,EAAE,CAAC,qBALL,CAME,GAAG,CAAE,KAAK,MANZ,CAOE,uBAAuB,CAAE,CAAE,MAAM,CAAE,EAAV,CAP3B,CAAA,CADF,CAWD,C,4CAtD0C,KAAK,CAAC,S,EAyDnD,cAAe,CAAA,KAAK,CAAC,UAAN,CAAiB,SAAC,KAAD,CAAiC,GAAjC,QAC9B,CAAA,KAAA,CAAA,aAAA,CAAC,8BAAD,gCAAoC,KAApC,MAA2C,QAAQ,CAAE,GAArD,GAD8B,EAAjB,CAAf,CAIA,GAAM,CAAA,MAAM,CAAG,CAEb,SAAS,CAAE,CAAE,MAAM,CAAE,IAAV,CAFE,CAAf","sourcesContent":["import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport * as React from 'react';\n\nimport { FirebaseAuthApplicationVerifier } from './FirebaseRecaptcha.types';\n\ninterface Props {\n  attemptInvisibleVerification?: boolean;\n  appVerificationDisabledForTesting?: boolean;\n  languageCode?: string;\n  innerRef: React.MutableRefObject<FirebaseAuthApplicationVerifier | null>;\n}\n\nclass FirebaseRecaptchaVerifierModal extends React.Component<Props> {\n  private verifier: FirebaseAuthApplicationVerifier | null = null;\n\n  private setRef = (ref: any) => {\n    if (ref) {\n      if (this.props.appVerificationDisabledForTesting !== undefined) {\n        firebase.auth().settings.appVerificationDisabledForTesting =\n          !!this.props.appVerificationDisabledForTesting;\n      }\n      if (this.props.languageCode) {\n        firebase.auth().languageCode = this.props.languageCode;\n      }\n      this.verifier = new firebase.auth.RecaptchaVerifier(ref, {\n        size: this.props.attemptInvisibleVerification ? 'invisible' : 'normal',\n      });\n    } else {\n      this.verifier = null;\n    }\n    if (this.props.innerRef) {\n      this.props.innerRef.current = this.verifier;\n    }\n  };\n\n  shouldComponentUpdate(nextProps: Props) {\n    return (\n      this.props.appVerificationDisabledForTesting !==\n        nextProps.appVerificationDisabledForTesting ||\n      this.props.attemptInvisibleVerification !== nextProps.attemptInvisibleVerification ||\n      this.props.languageCode !== nextProps.languageCode\n    );\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (this.props.innerRef !== prevProps.innerRef) {\n      if (this.props.innerRef) {\n        this.props.innerRef.current = this.verifier;\n      }\n    }\n  }\n\n  render() {\n    const { attemptInvisibleVerification, appVerificationDisabledForTesting, languageCode } =\n      this.props;\n    return (\n      <div\n        style={styles.container}\n        key={`${attemptInvisibleVerification ? 'invisible' : 'visible'}-${\n          appVerificationDisabledForTesting ? 'testing' : 'regular'\n        }-${languageCode ?? ''}`}\n        id=\"recaptcha-container\"\n        ref={this.setRef}\n        dangerouslySetInnerHTML={{ __html: '' }}\n      />\n    );\n  }\n}\n\nexport default React.forwardRef((props: Omit<Props, 'innerRef'>, ref: any) => (\n  <FirebaseRecaptchaVerifierModal {...props} innerRef={ref} />\n));\n\nconst styles = {\n  // Ensure the reCAPTCHA badge is in front or other elements\n  container: { zIndex: 1000 },\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}