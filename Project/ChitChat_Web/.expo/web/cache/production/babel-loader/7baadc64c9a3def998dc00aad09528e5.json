{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";var _jsxFileName=\"/home/runner/work/react-native-action-sheet/react-native-action-sheet/src/ActionSheet/index.tsx\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import*as React from'react';import Animated from\"react-native-web/dist/exports/Animated\";import BackHandler from\"react-native-web/dist/exports/BackHandler\";import Easing from\"react-native-web/dist/exports/Easing\";import Modal from\"react-native-web/dist/exports/Modal\";import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import View from\"react-native-web/dist/exports/View\";import ActionGroup from\"./ActionGroup\";var OPACITY_ANIMATION_IN_TIME=225;var OPACITY_ANIMATION_OUT_TIME=195;var EASING_OUT=Easing.bezier(0.25,0.46,0.45,0.94);var EASING_IN=Easing.out(EASING_OUT);var ESCAPE_KEY='Escape';var ActionSheet=function(_React$Component){_inherits(ActionSheet,_React$Component);var _super=_createSuper(ActionSheet);function ActionSheet(){var _this;_classCallCheck(this,ActionSheet);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this._actionSheetHeight=360;_this.state={isVisible:false,isAnimating:false,options:null,onSelect:null,overlayOpacity:new Animated.Value(0),sheetOpacity:new Animated.Value(0)};_this._deferAfterAnimation=undefined;_this._handleWebKeyDown=function(event){if(event.key===ESCAPE_KEY&&_this.state.isVisible){event.preventDefault();_this._selectCancelButton();}};_this._setActionSheetHeight=function(_ref){var nativeEvent=_ref.nativeEvent;return _this._actionSheetHeight=nativeEvent.layout.height;};_this.showActionSheetWithOptions=function(options,onSelect){var _this$state=_this.state,isVisible=_this$state.isVisible,overlayOpacity=_this$state.overlayOpacity,sheetOpacity=_this$state.sheetOpacity;if(isVisible){_this._deferAfterAnimation=_this.showActionSheetWithOptions.bind(_assertThisInitialized(_this),options,onSelect);return;}_this.setState({options:options,onSelect:onSelect,isVisible:true,isAnimating:true});overlayOpacity.setValue(0);sheetOpacity.setValue(0);Animated.parallel([Animated.timing(overlayOpacity,{toValue:0.32,easing:EASING_OUT,duration:OPACITY_ANIMATION_IN_TIME,useNativeDriver:_this.props.useNativeDriver}),Animated.timing(sheetOpacity,{toValue:1,easing:EASING_OUT,duration:OPACITY_ANIMATION_IN_TIME,useNativeDriver:_this.props.useNativeDriver})]).start(function(result){if(result.finished){_this.setState({isAnimating:false});_this._deferAfterAnimation=undefined;}});BackHandler.addEventListener('actionSheetHardwareBackPress',_this._selectCancelButton);};_this._selectCancelButton=function(){var options=_this.state.options;if(!options){return false;}if(typeof options.cancelButtonIndex==='undefined'){return false;}else if(typeof options.cancelButtonIndex==='number'){return _this._onSelect(options.cancelButtonIndex);}else{return _this._animateOut();}};_this._onSelect=function(index){var _this$state2=_this.state,isAnimating=_this$state2.isAnimating,onSelect=_this$state2.onSelect;if(isAnimating){return false;}if(onSelect){_this._deferAfterAnimation=onSelect.bind(_assertThisInitialized(_this),index);}return _this._animateOut();};_this._animateOut=function(){var _this$state3=_this.state,isAnimating=_this$state3.isAnimating,overlayOpacity=_this$state3.overlayOpacity,sheetOpacity=_this$state3.sheetOpacity;if(isAnimating){return false;}BackHandler.removeEventListener('actionSheetHardwareBackPress',_this._selectCancelButton);_this.setState({isAnimating:true});Animated.parallel([Animated.timing(overlayOpacity,{toValue:0,easing:EASING_IN,duration:OPACITY_ANIMATION_OUT_TIME,useNativeDriver:_this.props.useNativeDriver}),Animated.timing(sheetOpacity,{toValue:0,easing:EASING_IN,duration:OPACITY_ANIMATION_OUT_TIME,useNativeDriver:_this.props.useNativeDriver})]).start(function(result){if(result.finished){_this.setState({isVisible:false,isAnimating:false});if(_this._deferAfterAnimation){_this._deferAfterAnimation();}}});return true;};return _this;}_createClass(ActionSheet,[{key:\"componentDidMount\",value:function componentDidMount(){if(Platform.OS==='web'){document.addEventListener('keydown',this._handleWebKeyDown);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(Platform.OS==='web'){document.removeEventListener('keydown',this._handleWebKeyDown);}}},{key:\"render\",value:function render(){var _this$state4=this.state,isVisible=_this$state4.isVisible,overlayOpacity=_this$state4.overlayOpacity,options=_this$state4.options;var useModal=options?options.autoFocus||options.useModal===true:false;var overlay=isVisible?React.createElement(Animated.View,{style:[styles.overlay,{opacity:overlayOpacity}],__source:{fileName:_jsxFileName,lineNumber:82,columnNumber:7}}):null;var appContent=React.createElement(View,{style:styles.flexContainer,importantForAccessibility:isVisible?'no-hide-descendants':'auto',__source:{fileName:_jsxFileName,lineNumber:94,columnNumber:7}},React.Children.only(this.props.children));return React.createElement(View,{pointerEvents:this.props.pointerEvents,style:styles.flexContainer,__source:{fileName:_jsxFileName,lineNumber:102,columnNumber:7}},appContent,isVisible&&!useModal&&React.createElement(React.Fragment,null,overlay,this._renderSheet()),isVisible&&useModal&&React.createElement(Modal,{animationType:\"none\",transparent:true,onRequestClose:this._selectCancelButton,__source:{fileName:_jsxFileName,lineNumber:111,columnNumber:11}},overlay,this._renderSheet()));}},{key:\"_renderSheet\",value:function _renderSheet(){var _this$state5=this.state,options=_this$state5.options,isAnimating=_this$state5.isAnimating,sheetOpacity=_this$state5.sheetOpacity;if(!options){return null;}var optionsArray=options.options,icons=options.icons,tintIcons=options.tintIcons,destructiveButtonIndex=options.destructiveButtonIndex,disabledButtonIndices=options.disabledButtonIndices,destructiveColor=options.destructiveColor,textStyle=options.textStyle,tintColor=options.tintColor,title=options.title,titleTextStyle=options.titleTextStyle,message=options.message,messageTextStyle=options.messageTextStyle,autoFocus=options.autoFocus,showSeparators=options.showSeparators,containerStyle=options.containerStyle,separatorStyle=options.separatorStyle;return React.createElement(TouchableWithoutFeedback,{importantForAccessibility:\"yes\",onPress:this._selectCancelButton,__source:{fileName:_jsxFileName,lineNumber:146,columnNumber:7}},React.createElement(Animated.View,{needsOffscreenAlphaCompositing:isAnimating,style:[styles.sheetContainer,{opacity:sheetOpacity,transform:[{translateY:sheetOpacity.interpolate({inputRange:[0,1],outputRange:[this._actionSheetHeight,0]})}]}],__source:{fileName:_jsxFileName,lineNumber:147,columnNumber:9}},React.createElement(View,{style:styles.sheet,onLayout:this._setActionSheetHeight,__source:{fileName:_jsxFileName,lineNumber:163,columnNumber:11}},React.createElement(ActionGroup,{options:optionsArray,icons:icons,tintIcons:tintIcons===undefined?true:tintIcons,destructiveButtonIndex:destructiveButtonIndex,destructiveColor:destructiveColor,disabledButtonIndices:disabledButtonIndices,onSelect:this._onSelect,startIndex:0,length:optionsArray.length,textStyle:textStyle||{},tintColor:tintColor,title:title||undefined,titleTextStyle:titleTextStyle,message:message||undefined,messageTextStyle:messageTextStyle,autoFocus:autoFocus,showSeparators:showSeparators,containerStyle:containerStyle,separatorStyle:separatorStyle,__source:{fileName:_jsxFileName,lineNumber:164,columnNumber:13}}))));}}]);return ActionSheet;}(React.Component);ActionSheet.defaultProps={useNativeDriver:true};export{ActionSheet as default};var styles=StyleSheet.create({flexContainer:{flex:1},overlay:{position:'absolute',top:0,right:0,bottom:0,left:0,backgroundColor:'black'},sheetContainer:{position:'absolute',left:0,right:0,bottom:0,top:0,backgroundColor:'transparent',alignItems:'flex-end',justifyContent:'center',flexDirection:'row'},sheet:{flex:1,backgroundColor:'transparent'}});","map":{"version":3,"sources":["index.tsx"],"names":["OPACITY_ANIMATION_IN_TIME","OPACITY_ANIMATION_OUT_TIME","EASING_OUT","Easing","EASING_IN","ESCAPE_KEY","ActionSheet","React","Component","defaultProps","useNativeDriver","_actionSheetHeight","state","isVisible","isAnimating","options","onSelect","overlayOpacity","Animated","sheetOpacity","_deferAfterAnimation","undefined","Platform","document","_handleWebKeyDown","event","_setActionSheetHeight","nativeEvent","useModal","overlay","styles","opacity","appContent","optionsArray","icons","tintIcons","destructiveButtonIndex","disabledButtonIndices","destructiveColor","textStyle","tintColor","title","titleTextStyle","message","messageTextStyle","autoFocus","showSeparators","containerStyle","separatorStyle","transform","translateY","inputRange","outputRange","showActionSheetWithOptions","toValue","easing","duration","result","BackHandler","_selectCancelButton","_onSelect","_animateOut","StyleSheet","flexContainer","flex","position","top","right","bottom","left","backgroundColor","sheetContainer","alignItems","justifyContent","flexDirection","sheet"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Animated,\n  BackHandler,\n  Easing,\n  Modal,\n  Platform,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n  ViewProps,\n} from 'react-native';\n\nimport { ActionSheetOptions } from '../types';\nimport ActionGroup from './ActionGroup';\n\ninterface State {\n  isVisible: boolean;\n  isAnimating: boolean;\n  options: ActionSheetOptions | null;\n  onSelect: ((i: number) => void) | null;\n  overlayOpacity: any;\n  sheetOpacity: any;\n}\n\ninterface Props {\n  readonly useNativeDriver: boolean | undefined;\n  readonly pointerEvents?: ViewProps['pointerEvents'];\n}\n\nconst OPACITY_ANIMATION_IN_TIME = 225;\nconst OPACITY_ANIMATION_OUT_TIME = 195;\nconst EASING_OUT = Easing.bezier(0.25, 0.46, 0.45, 0.94);\nconst EASING_IN = Easing.out(EASING_OUT);\nconst ESCAPE_KEY = 'Escape';\n\n// Has same API as https://facebook.github.io/react-native/docs/actionsheetios.html\nexport default class ActionSheet extends React.Component<Props, State> {\n  static defaultProps = {\n    useNativeDriver: true,\n  };\n\n  _actionSheetHeight = 360;\n\n  state: State = {\n    isVisible: false,\n    isAnimating: false,\n    options: null,\n    onSelect: null,\n    overlayOpacity: new Animated.Value(0),\n    sheetOpacity: new Animated.Value(0),\n  };\n\n  _deferAfterAnimation?: () => void = undefined;\n\n  componentDidMount() {\n    if (Platform.OS === 'web') {\n      document.addEventListener('keydown', this._handleWebKeyDown);\n    }\n  }\n\n  componentWillUnmount() {\n    if (Platform.OS === 'web') {\n      document.removeEventListener('keydown', this._handleWebKeyDown);\n    }\n  }\n\n  _handleWebKeyDown = (event: KeyboardEvent): void => {\n    if (event.key === ESCAPE_KEY && this.state.isVisible) {\n      event.preventDefault();\n      this._selectCancelButton();\n    }\n  };\n\n  _setActionSheetHeight = ({ nativeEvent }: any) =>\n    (this._actionSheetHeight = nativeEvent.layout.height);\n\n  render() {\n    const { isVisible, overlayOpacity, options } = this.state;\n    const useModal = options ? options.autoFocus || options.useModal === true : false;\n    const overlay = isVisible ? (\n      <Animated.View\n        style={[\n          styles.overlay,\n          {\n            opacity: overlayOpacity,\n          },\n        ]}\n      />\n    ) : null;\n\n    // While the sheet is visible, hide the rest of the app's content from screen readers.\n    const appContent = (\n      <View\n        style={styles.flexContainer}\n        importantForAccessibility={isVisible ? 'no-hide-descendants' : 'auto'}>\n        {React.Children.only(this.props.children)}\n      </View>\n    );\n\n    return (\n      <View pointerEvents={this.props.pointerEvents} style={styles.flexContainer}>\n        {appContent}\n        {isVisible && !useModal && (\n          <>\n            {overlay}\n            {this._renderSheet()}\n          </>\n        )}\n        {isVisible && useModal && (\n          <Modal animationType=\"none\" transparent onRequestClose={this._selectCancelButton}>\n            {overlay}\n            {this._renderSheet()}\n          </Modal>\n        )}\n      </View>\n    );\n  }\n\n  _renderSheet() {\n    const { options, isAnimating, sheetOpacity } = this.state;\n\n    if (!options) {\n      return null;\n    }\n\n    const {\n      options: optionsArray,\n      icons,\n      tintIcons,\n      destructiveButtonIndex,\n      disabledButtonIndices,\n      destructiveColor,\n      textStyle,\n      tintColor,\n      title,\n      titleTextStyle,\n      message,\n      messageTextStyle,\n      autoFocus,\n      showSeparators,\n      containerStyle,\n      separatorStyle,\n    } = options;\n    return (\n      <TouchableWithoutFeedback importantForAccessibility=\"yes\" onPress={this._selectCancelButton}>\n        <Animated.View\n          needsOffscreenAlphaCompositing={isAnimating}\n          style={[\n            styles.sheetContainer,\n            {\n              opacity: sheetOpacity,\n              transform: [\n                {\n                  translateY: sheetOpacity.interpolate({\n                    inputRange: [0, 1],\n                    outputRange: [this._actionSheetHeight, 0],\n                  }),\n                },\n              ],\n            },\n          ]}>\n          <View style={styles.sheet} onLayout={this._setActionSheetHeight}>\n            <ActionGroup\n              options={optionsArray}\n              icons={icons}\n              tintIcons={tintIcons === undefined ? true : tintIcons}\n              destructiveButtonIndex={destructiveButtonIndex}\n              destructiveColor={destructiveColor}\n              disabledButtonIndices={disabledButtonIndices}\n              onSelect={this._onSelect}\n              startIndex={0}\n              length={optionsArray.length}\n              textStyle={textStyle || {}}\n              tintColor={tintColor}\n              title={title || undefined}\n              titleTextStyle={titleTextStyle}\n              message={message || undefined}\n              messageTextStyle={messageTextStyle}\n              autoFocus={autoFocus}\n              showSeparators={showSeparators}\n              containerStyle={containerStyle}\n              separatorStyle={separatorStyle}\n            />\n          </View>\n        </Animated.View>\n      </TouchableWithoutFeedback>\n    );\n  }\n\n  showActionSheetWithOptions = (options: ActionSheetOptions, onSelect: (i: number) => void) => {\n    const { isVisible, overlayOpacity, sheetOpacity } = this.state;\n\n    if (isVisible) {\n      this._deferAfterAnimation = this.showActionSheetWithOptions.bind(this, options, onSelect);\n      return;\n    }\n\n    this.setState({\n      options,\n      onSelect,\n      isVisible: true,\n      isAnimating: true,\n    });\n    overlayOpacity.setValue(0);\n    sheetOpacity.setValue(0);\n    Animated.parallel([\n      Animated.timing(overlayOpacity, {\n        toValue: 0.32,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n      Animated.timing(sheetOpacity, {\n        toValue: 1,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n    ]).start((result) => {\n      if (result.finished) {\n        this.setState({\n          isAnimating: false,\n        });\n        this._deferAfterAnimation = undefined;\n      }\n    });\n    // @ts-ignore: Argument of type '\"actionSheetHardwareBackPress\"' is not assignable to parameter of type '\"hardwareBackPress\"'\n    BackHandler.addEventListener('actionSheetHardwareBackPress', this._selectCancelButton);\n  };\n\n  _selectCancelButton = () => {\n    const { options } = this.state;\n\n    if (!options) {\n      return false;\n    }\n\n    if (typeof options.cancelButtonIndex === 'undefined') {\n      return false;\n    } else if (typeof options.cancelButtonIndex === 'number') {\n      return this._onSelect(options.cancelButtonIndex);\n    } else {\n      return this._animateOut();\n    }\n  };\n\n  _onSelect = (index: number): boolean => {\n    const { isAnimating, onSelect } = this.state;\n\n    if (isAnimating) {\n      return false;\n    }\n\n    if (onSelect) {\n      this._deferAfterAnimation = onSelect.bind(this, index);\n    }\n\n    return this._animateOut();\n  };\n\n  _animateOut = (): boolean => {\n    const { isAnimating, overlayOpacity, sheetOpacity } = this.state;\n\n    if (isAnimating) {\n      return false;\n    }\n\n    // @ts-ignore: Argument of type '\"actionSheetHardwareBackPress\"' is not assignable to parameter of type '\"hardwareBackPress\"'\n    BackHandler.removeEventListener('actionSheetHardwareBackPress', this._selectCancelButton);\n    this.setState({\n      isAnimating: true,\n    });\n    Animated.parallel([\n      Animated.timing(overlayOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n      Animated.timing(sheetOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n    ]).start((result) => {\n      if (result.finished) {\n        this.setState({\n          isVisible: false,\n          isAnimating: false,\n        });\n\n        if (this._deferAfterAnimation) {\n          this._deferAfterAnimation();\n        }\n      }\n    });\n    return true;\n  };\n}\n\nconst styles = StyleSheet.create({\n  flexContainer: {\n    flex: 1,\n  },\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    backgroundColor: 'black',\n  },\n  sheetContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    top: 0,\n    backgroundColor: 'transparent',\n    alignItems: 'flex-end',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  sheet: {\n    flex: 1,\n    backgroundColor: 'transparent',\n  },\n});\n"]},"metadata":{},"sourceType":"module"}